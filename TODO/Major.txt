оптимизация рассчета пересечения отрезков: вместо рассчета расстояния от точки пересечения до краев отрезков, можно использовать уравнение для рассчета y от x и проверки, находится ли он между y'ками точек краев
ГОТОВО - нужно протестировать на производительность
